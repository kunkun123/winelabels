<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>complaint-CpComplaintsreport</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="../../../static/styles/css/ace-fonts.css"/>
    <link rel="stylesheet" type="text/css" href="../../../static/styles/css/font-awesome.css"/>
    <link rel="stylesheet" type="text/css" href="../../../static/styles/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="../../../static/styles/css/bootstrap-table.min.css"/>
    <link rel="stylesheet" href="../../../static/scripts/gecko-modules/bootstrap/bootstrap-editable.css">
    <link rel="stylesheet" type="text/css" href="../../../static/styles/css/ace.css"/>
    <link rel="stylesheet" type="text/css" href="../../../static/styles/gecko.css"/>
    <script type="text/javascript" src="../../../static/scripts/gecko-modules/jquery/jquery.js"></script>
    <script type="text/javascript" src="../../../static/scripts/gecko-modules/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../static/scripts/gecko-modules/bootstrap/bootstrap-table.js"></script>
    <script src="../../../static/scripts/gecko-modules/bootstrap/bootstrap-table-editable.js"></script>
    <script src="../../../static/scripts/gecko-modules/bootstrap/bootstrap-editable.min.js"></script>
    <script type="text/javascript" src="../../../static/scripts/gecko-modules/bootstrap/bootstrap-table-zh-CN.js"></script>
    <script type="text/javascript" src="../../../static/scripts/app/system/comm/utils.js"></script>
    <script type="text/javascript" src="../../../static/scripts/complaint/cpcomplaintsreport/cpcomplaintsreport.js"></script>
    <script type="text/javascript">
        var tableId = "cpcomplaintsreportTable";
        $(function () {
            $("#" + tableId).bootstrapTable({
                toolbar: "#toolbar",
                idField: "ID",
                pagination: true,
                limit: 15,
                showRefresh: true,
                sidePagination: "server",
                search: true,
                url: "/complaint/cpcomplaintsreport/list",
                columns: [{
                    checkbox: true
                }, {
                    field: "ID",
                    visible: false
                }, {
                    field: "responsedate",
                    title: "答复时间",
                    type: "date",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "content",
                    title: "投诉内容",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "audiourl",
                    title: "案件录音URL",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "acceptedDate",
                    title: "受理日期",
                    type: "date",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "importance",
                    title: "重要程度",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "isanonymous",
                    title: "是否匿名",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "acceptype",
                    title: "受理方式",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "respondent",
                    title: "被投诉人",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "closedate",
                    title: "办结时间",
                    type: "date",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "supervisionperson",
                    title: "督办人",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "supervisiondate",
                    title: "督办日期",
                    type: "date",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "classification",
                    title: "问题分类",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "supervisionedperson",
                    title: "被督办人",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "registrationUnit",
                    title: "登记单位",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "channel",
                    title: "投诉渠道",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "attachurl",
                    title: "附件URL",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "temp5",
                    title: "备用5",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "limitdate",
                    title: "办结日期",
                    type: "date",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "registerdate",
                    title: "登记日期",
                    type: "date",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "temp4",
                    title: "备用4",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "responsecontent",
                    title: "答复内容",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "title",
                    title: "投诉标题",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "currentflow",
                    title: "当前流程",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "callstarttime",
                    title: "呼叫开始时间",
                    type: "datetime",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "feedbacktel",
                    title: "反馈人联系方式",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "enttypename",
                    title: "企业类型名称",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "area",
                    title: "问题发生地",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "temp6",
                    title: "备用6",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "caseno",
                    title: "立案号",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "product",
                    title: "被投诉产品",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "callserial",
                    title: "呼叫流水号",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "complainant",
                    title: "投诉人",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "acceptance",
                    title: "是否受理",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "businessType",
                    title: "业务类型",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "enttype",
                    title: "企业类型编号",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "operator",
                    title: "操作人",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "isdelay",
                    title: "是否延期",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "keyword",
                    title: "关键字",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "problemLink",
                    title: "问题环节",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "supervision",
                    title: "是否督办",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "refid",
                    title: "主案ID",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "iscase",
                    title: "是否立案",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "opinion",
                    title: "不予受理意见",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "isotherdept",
                    title: "是否转送其他部门",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "delayreason",
                    title: "延期理由",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "source",
                    title: "业务来源",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "otherdept",
                    title: "转送部门",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "isfirst",
                    title: "是否首次投诉",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "accept",
                    title: "投诉受理人",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "calltel",
                    title: "来电号码",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "temp1",
                    title: "备用1",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "feedback",
                    title: "反馈人",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "querycode",
                    title: "投诉查询码",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "infoid",
                    title: "信息编号",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "lastupdatetime",
                    title: "最后更新时间",
                    type: "date",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "seatno",
                    title: "坐席工号",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "registrationarea",
                    title: "登记单位行政区",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "temp2",
                    title: "备用2",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "status",
                    title: "投诉状态",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "temp3",
                    title: "备用3",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "callendtime",
                    title: "呼叫结束时间",
                    type: "datetime",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }, {
                    field: "fistcomplaint",
                    title: "首次投诉ID",
                    type: "text",
                    search: "true",
                    editable: {
                        type: "text"                    }
                }],
                onEditableSave: function (field, row, oldValue, e) {
                    var data = {name: field, pk: row.id, value: row[field]};
                    $.ajax({
                        type: "post",
                        url: "/complaint/cpcomplaintsreport/edit",
                        data: data,
                        dataType: 'JSON',
                        content: "application/json;charset=UTF8",
                        success: function (data, status) {
                            if (status === "success") {
                                //info("authorityTable", '修改成功');
                            }
                        },
                        error: function () {
                            //info('authorityTable', '编辑失败');
                        },
                        complete: function () {

                        }
                    });
                }
            });
        });
        var remove = function () {
            var table = $("#" + tableId);
            var selected = table.bootstrapTable("getSelections");
            var ids = [];
            selected.forEach(function (t) {
                ids.push(t.id)
            });

            if (ids.length >= 1 && confirm("确认删除以下数据据：" + ids + " ?")) {
                $.ajax({
                    url: "/complaint/cpcomplaintsreport/delete", data: JSON.stringify(ids), type: "DELETE",
                    contentType: "application/json;charset=utf8",
                    success: function (resp) {
                        if (resp.code === 0) {
                            //info(tableId, "删除成功");
                            table.bootstrapTable('remove', {field: 'id', values: ids});
                        }
                    }
                });
            }
        };
        var add = function () {
            var table = $("#" + tableId);
            //TODO change this init param my yourself
            var rowData = {ID: "" ,responsedate:"",content:"",audiourl:"",acceptedDate:"",importance:"",isanonymous:"",acceptype:"",respondent:"",closedate:"",supervisionperson:"",supervisiondate:"",classification:"",supervisionedperson:"",registrationUnit:"",channel:"",attachurl:"",temp5:"",limitdate:"",registerdate:"",temp4:"",responsecontent:"",title:"",currentflow:"",callstarttime:"",feedbacktel:"",enttypename:"",area:"",temp6:"",caseno:"",product:"",callserial:"",complainant:"",acceptance:"",businessType:"",enttype:"",operator:"",isdelay:"",keyword:"",problemLink:"",supervision:"",refid:"",iscase:"",opinion:"",isotherdept:"",delayreason:"",source:"",otherdept:"",isfirst:"",accept:"",calltel:"",temp1:"",feedback:"",querycode:"",infoid:"",lastupdatetime:"",seatno:"",registrationarea:"",temp2:"",status:"",temp3:"",callendtime:"",fistcomplaint:""};
            $.ajax({
                url: "/complaint/cpcomplaintsreport/save",
                data: JSON.stringify(rowData),
                type: "PUT",
                contentType: "application/json; charset=UTF-8",
                success: function (res) {
                    if (res.code === 0) {
                        rowData.id = res.data.id;
                        table.bootstrapTable("insertRow", {index: 0, row: rowData});
                    }
                }
            });
        }
    </script>
</head>
<body>
<!--顶部按钮-->
<div id="toolbar">
    <div class="btn-group">
        <button id="add" class="btn btn-md btn-success" onclick="add();">新建</button>
        <button id="delete" class="btn btn-md btn-danger" onclick="remove();">删除</button>
    </div>
</div>

<div class="page-content">
    <table id="cpcomplaintsreportTable"></table>
</div>
</body>
</html>