<%--
  Created by IntelliJ IDEA.
  User: jixiang
  Date: 2018/1/15
  Time: 10:44
  To change this template use File | Settings | File Templates.
--%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>complaint-CpComplaintsreport</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="/static/styles/css/bootstrap.css"/>
    <link rel="stylesheet" href="/static/styles/css/font-awesome.css"/>
    <!-- page specific plugin styles -->
    <!-- text fonts -->
    <link rel="stylesheet" href="/static/styles/css/ace-fonts.css"/>
    <!-- ace styles -->
    <link rel="stylesheet" href="/static/styles/css/ace.css" class="ace-main-stylesheet" id="main-ace-style"/>
    <script src="/static/scripts/gecko-modules/ace/ace-extra.min.js"></script>
    <script src="/static/scripts/gecko-modules/jquery/jquery.js"></script>
    <script src="/static/scripts/gecko-modules/bootstrap/bootstrap.js"></script>
    <script src="/static/scripts/gecko-modules/bootstrap/bootstrap-table.js"></script>
    <script src="/static/scripts/gecko-modules/bootstrap/bootstrap-table-zh-CN.js"></script>
    <script src="/static/scripts/gecko-modules/bootstrap/bootstrap-datepicker.js"></script>
    <script src="/static/scripts/gecko-modules/bootstrap/bootstrap-datepicker-zhCN.js"></script>
</head>
<style>
    .row-margin-top{
        margin-top: 10px;
    }
</style>
<body class="no-skin">
<div class="main-container ace-save-state" id="main-container">
    <div class="main-content">
        <div class="main-content-inner">
            <div class="page-content">
                <div class="page-header">
                    <h1>
                        酒标管理
                    </h1>
                </div><!-- /.page-header -->
                <form role="form" id="queryForm" action="">
                    <table class="table table-hover">
                        <tr class="table-bordered">
                            <td class=" table-bordered" style="width:28%">
                                <label class="bolder blue control-label "  for="serialSearch">酒标编码：</label>
                                <input name="search"  id="serialSearch" type="text"  class="form-control"/>
                            </td>
                            <td class=" table-bordered" style="width:28%">
                                <label class="control-label bolder blue" for="productidSearch">对应商品：</label>
                                <input name="search" id="productidSearch" type="text" class="form-control"/>
                            </td>
                            <td  align="center" style="vertical-align: middle" class="table-bordered" style="width:25%">
                                <label  class="control-label bolder blue">&nbsp;&nbsp;&nbsp;&nbsp;状态：</label>
                                <select name="search" id="statusSearch">
                                    <%--<option value="0">&nbsp;不限</option>--%>
                                    <option value="">&nbsp;不限</option>
                                    <option value="UNUSERD">&nbsp;未使用</option>
                                    <option value="UNCIRCULATION">&nbsp;未流转</option>
                                    <option value="CIRCULATIONING">&nbsp;流转中</option>
                                    <option value="WRITTENOFF">&nbsp;已核销</option>
                                    <%--<option value="5">&nbsp;异常</option>--%>
                                </select>
                            </td>
                            <td align="center" class=" table-bordered" style="width:10%">
                                <button type="button" class="btn btn-primary" onclick="queryList()">查询</button>
                            </td>
                        </tr>
                    </table>
                </form>

                <table id="labelManagerList">
                </table>

            </div>
        </div><!-- PAGE CONTENT ENDS -->
    </div><!-- /.col -->
</div><!-- /.row -->
<!-- /.main-container -->


<div class="modal fade" id="viewBoxModal" tabindex="-1" role="dialog" aria-labelledby="viewBox" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="viewBox">
                    箱标详细情况
                </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">酒标编码：<span class="infobox-black" id="VBoxSerial"></span></div>
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">对应商品：<span class="infobox-black" id="VBoxProductName"></span></div>
                </div>
                <div class="row">
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">酒标类型：<span class="infobox-black" id="VBoxLabel"></span></div>
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">商品种类：<span class="infobox-black" id="VBoxProductType"></span></div>
                </div>
                <div class="row">
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">状态：<span class="infobox-black" id="VBoxStatus"></span></div>
                </div>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>

<div class="modal fade" id="viewBottleModal" tabindex="-1" role="dialog" aria-labelledby="viewBottle" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="viewBottle">
                    瓶标详细情况
                </h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">酒标编码：<span class="infobox-black" id="VBottleSerial"></span></div>
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">对应商品：<span class="infobox-black" id="VBottleProductName"></span></div>
                </div>
                <div class="row">
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">酒标类型：<span class="infobox-black" id="VBottleLabel"></span></div>
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">商品种类：<span class="infobox-black" id="VBottleProductType"></span></div>
                </div>
                <div class="row">
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">状态：<span class="infobox-black" id="VBottleStatus"></span></div>
                </div>
                <div class="row">
                    <div class="col-sm-6 row-margin-top blue" style="font-size: larger">所属箱标编码：<span class="infobox-black" id="VBottleBoxLabel"></span></div>
                </div>
                </div>
            </div>

        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>


<script type="text/javascript">
    $('#labelManagerList').bootstrapTable({
        //toolbar: "#toolbar",
        idField: "id",
        pagination: true,
        clickToSelect:true,
        // method : "POST",
        //contentType : "application/x-www-form-urlencoded",
        sidePagination: 'client',
        pageNumber: 1,
        pageSize: 5,
        pageList: [5, 10, 20],
        queryParams:queryParams,

        <%--url: "<c:url value='/SellServlet?act=ajaxGetSellRecord'/>", //获取数据的Servlet地址--%>
        url:"/wineLabels/alalcohollable/managerList",

        columns: [{
            checkbox: true
        }, {
            field:'id',
            visible:false
        },
            {
                field: 'serial',
                title: '酒标编码',
                sortable:true
            },  {
                field: 'boxlable',
                title: '对应箱标',
                visible: false
            },{
                field: 'temp2',
                title: '酒标类型'
            }, {
                field: 'productid',
                title: '对应商品'
            }, {
                field: 'temp3',
                title: '商品种类',
            }, {
                field: 'temp1',
                title: '状态'
            },{
                field: 'operate',
                title: '操作',
                //events: operateEvents,
                formatter:operateFormatter
            },]
    });

    function queryParams(params) {
        /*var params = {
            startDate : $('#startDate').val(),
            endDate : $('#endDate').val(),
            auditStatus : $('#auditStatus').val()
        }*/
        params.serialSearch = $('#serialSearch').val();
        params.productidSearch = $('#productidSearch').val();
        params.statusSearch = $('#statusSearch').val();
        console.log(params)
        return params;
    }
    /*申请列表查询*/
    function queryList(){
        $('#labelManagerList').bootstrapTable('refresh');
    }

    /*箱子酒标详情查看*/
    function viewBox(row) {
        $('#viewBoxModal').modal('show');
        $('#VBoxSerial').html(row.serial);
        $('#VBoxProductName').html(row.productid);
        $('#VBoxLabel').html(row.temp2);
        $('#VBoxProductType').html(row.temp3);
        $('#VBoxStatus').html(row.temp1);
    }
    /*瓶装酒标详情查看*/
    function viewBottle(row) {
        $('#viewBottleModal').modal('show');
        $('#VBottleSerial').html(row.serial);
        $('#VBottleProductName').html(row.productid);
        $('#VBottleLabel').html(row.temp2);
        $('#VBottleProductType').html(row.temp3);
        $('#VBottleStatus').html(row.temp1);
        $('#VBottleBoxLabel').html(row.boxlable);
    }

    function bigImg(x) {
        x.style.width = "100%";
    }
    function normalImg(x) {
        x.style.width = "10%";
    }
    /*根据审核状态进行相应的操作*/
    function operateFormatter(value,row,index) {
        if(row.temp2 == '箱子'){
            return[
                "<a class='remove' href='javascript:void(0)' onclick='viewBox("+JSON.stringify(row)+")' title='查看'>" +
                "&emsp;查看详情" +
                "</a>"
            ].join('')
        }
        else if(row.temp2 == "瓶装"){
            return[
                "<a class='remove' href='javascript:void(0)' onclick='viewBottle("+JSON.stringify(row)+")' title='查看'>" +
                "&emsp;查看详情" +
                "</a>"
            ].join('')
        };
    }
</script>


</body>
</html>
